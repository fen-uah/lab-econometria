---
title: "01_Introducci√≥n_y_Estad√≠stica_Descriptiva"
format:
  html:
    toc: true
    toc-title: "Contenido"
    smooth-scroll: true
    code-fold: false
    code-copy: true
execute:
  echo: true
  warning: false
  message: false
---

# üìò Material Te√≥rico

> Este laboratorio se basa en el documento **"01_Introducci√≥n_y_Estad√≠stica_Descriptiva (versi√≥n imprimible)"**, donde se revisan los conceptos fundamentales de la estad√≠stica descriptiva y su aplicaci√≥n pr√°ctica en RStudio.

[Descargar documento en PDF](../pdf_epg/01_Introduccion_y_Estadistica_Descriptiva_version_imprimible.pdf){.btn target="_blank" rel="noopener"}

------------------------------------------------------------------------

## üìë Contenido del PDF

1.  **Introducci√≥n a la estad√≠stica**
    -   Concepto de variable aleatoria y datos
    -   Tipos de datos: cualitativos y cuantitativos\
2.  **M√©todos gr√°ficos para datos cualitativos y cuantitativos**
    -   Gr√°fico de barras, torta y Pareto\
    -   Histogramas y densidades
3.  **Medidas num√©ricas**
    -   Media, mediana, moda, rango, varianza, desviaci√≥n est√°ndar, coeficiente de variaci√≥n\
4.  **Distribuciones y normalidad**
    -   Pruebas de Shapiro-Wilk y Kolmogorov-Smirnov\
    -   Q-Q plot\
5.  **Asimetr√≠a y curtosis**

------------------------------------------------------------------------

# üß† Objetivo del Laboratorio

Aprender a aplicar herramientas b√°sicas de **estad√≠stica descriptiva** en R, utilizando datos **cualitativos** y **cuantitativos**, comprendiendo c√≥mo construir gr√°ficos, calcular medidas y verificar normalidad de una distribuci√≥n.

------------------------------------------------------------------------

# üîß Preparaci√≥n del entorno

```{r}
# Instalar librer√≠as si no est√°n disponibles
# install.packages(c("openxlsx", "qcc", "modeest", "psych", "moments"))

library(openxlsx)  # para leer archivos Excel
library(qcc)       # para gr√°ficos de control y Pareto
library(modeest)   # para calcular la moda
library(psych)     # para an√°lisis descriptivo
library(moments)   # para asimetr√≠a y curtosis
```

------------------------------------------------------------------------

# üß© Parte A ‚Äî Datos cualitativos

```{r}
datos1 <- read.xlsx("../data_epg/Ejemplo1.xlsx", sheet = "Hoja1", colNames = TRUE)
head(datos1)
```

üîç **Explicaci√≥n**\
`read.xlsx()` lee archivos Excel. `head()` muestra las primeras filas del conjunto de datos.

------------------------------------------------------------------------

```{r}
total <- sum(datos1$Frecuencia, na.rm = TRUE)
datos1$relativa <- datos1$Frecuencia / total
datos1
```

üîç **Explicaci√≥n**\
Calcula la frecuencia total y la frecuencia relativa (proporci√≥n de cada categor√≠a).

------------------------------------------------------------------------

```{r}
relativo <- setNames(as.numeric(datos1$relativa), datos1$Categoria)
relativo
```

üîç **Explicaci√≥n**\
Asigna nombres a los valores para construir gr√°ficos.

------------------------------------------------------------------------

```{r}
barplot(relativo,
        xlab = "Categor√≠as de accidentes",
        ylab = "Frecuencia relativa",
        las = 2,
        col = "steelblue",
        main = "Gr√°fico de barras de frecuencias relativas")
```

üîç **Explicaci√≥n**\
Crea un gr√°fico de barras para visualizar proporciones entre categor√≠as.

------------------------------------------------------------------------

```{r}
pie(relativo,
    labels = names(relativo),
    col = rainbow(length(relativo)),
    main = "Distribuci√≥n porcentual de accidentes")
```

üîç **Explicaci√≥n**\
Gr√°fico circular para representar la proporci√≥n de cada categor√≠a.

------------------------------------------------------------------------

```{r}
par(mar = rep(3, 4))
pareto.chart(relativo,
             ylab = "Frecuencia relativa",
             main = "Diagrama de Pareto: Categor√≠as de accidentes")
par(mar = c(5, 4, 4, 2) + 0.1)
```

üîç **Explicaci√≥n**\
El diagrama de Pareto ordena categor√≠as y muestra la proporci√≥n acumulada.

------------------------------------------------------------------------

# üìä Parte B ‚Äî Datos cuantitativos

```{r}
datos2 <- read.xlsx("../data_epg/Ejemplo2.xlsx", sheet = "Hoja1", colNames = TRUE)

milla <- 1.6093
galon <- 3.78
factorconversion <- milla / galon
datos2$EPA_Mileage_Ratings_km_l <- factorconversion * datos2$EPA_Mileage_Ratings_milla_galon
```

üîç **Explicaci√≥n**\
Convierte unidades de rendimiento de millas/gal√≥n a km/litro.

------------------------------------------------------------------------

```{r}
plot(datos2$EPA_Mileage_Ratings_km_l,
     main = "Rendimiento EPA (km/l)",
     ylab = "km/l",
     xlab = "Observaciones",
     type = "b", col = "darkgreen")
```

üîç **Explicaci√≥n**\
Muestra el rendimiento por observaci√≥n (√∫til para detectar valores at√≠picos).

------------------------------------------------------------------------

```{r}
hist(datos2$EPA_Mileage_Ratings_km_l,
     main = "Histograma del rendimiento (EPA)",
     xlab = "km/l",
     freq = FALSE,
     col = "lightblue")

lines(density(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE))
m <- mean(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
s <- sd(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
curve(dnorm(x, mean = m, sd = s), add = TRUE, col = "red", lwd = 2)
```

üîç **Explicaci√≥n**\
Combina histograma, densidad emp√≠rica y curva normal te√≥rica para comparar formas.

------------------------------------------------------------------------

```{r}
boxplot(datos2$EPA_Mileage_Ratings_km_l,
        main = "Diagrama de cajas",
        ylab = "km/l",
        col = "lightgreen",
        outline = TRUE)
```

üîç **Explicaci√≥n**\
El boxplot muestra mediana, cuartiles y posibles valores extremos.

------------------------------------------------------------------------

```{r}
media   <- mean(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
mediana <- median(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
moda    <- mfv(datos2$EPA_Mileage_Ratings_km_l)
rango   <- range(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
desv    <- sd(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
cv      <- desv / media
cuant   <- quantile(datos2$EPA_Mileage_Ratings_km_l, probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
list(Media = media, Mediana = mediana, Moda = moda,
     Minimo = rango[1], Maximo = rango[2],
     Desviacion = desv, Coef_Variacion = cv,
     Cuantiles = cuant)
```

üîç **Explicaci√≥n**\
Calcula medidas de tendencia central, dispersi√≥n y posici√≥n.

------------------------------------------------------------------------

```{r}
shapiro.test(datos2$EPA_Mileage_Ratings_km_l)
ks.test(datos2$EPA_Mileage_Ratings_km_l, pnorm, m, s)
qqnorm(datos2$EPA_Mileage_Ratings_km_l, main = "Q-Q Plot Normal")
qqline(datos2$EPA_Mileage_Ratings_km_l, col = "red", lwd = 2)
```

üîç **Explicaci√≥n**\
Eval√∫a la normalidad mediante pruebas estad√≠sticas y gr√°fico Q-Q.

------------------------------------------------------------------------

```{r}
asimetria <- skewness(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
curtosis  <- kurtosis(datos2$EPA_Mileage_Ratings_km_l, na.rm = TRUE)
c(skewness = asimetria, kurtosis = curtosis)
```

üîç **Explicaci√≥n**\
Mide la forma de la distribuci√≥n: asimetr√≠a (cola) y curtosis (peso de colas).

------------------------------------------------------------------------

```{r}
set.seed(123)
datos_simulados <- rnorm(
  n = sum(!is.na(datos2$EPA_Mileage_Ratings_km_l)),
  mean = m, sd = s
)

hist(datos_simulados, main = "Simulaci√≥n normal te√≥rica",
     xlab = "km/l (simulado)", freq = FALSE, col = "lightgray")
curve(dnorm(x, mean = m, sd = s), add = TRUE, lwd = 2, col = "blue")
```

üîç **Explicaci√≥n**\
Simula una muestra normal te√≥rica y la compara con los datos observados.
